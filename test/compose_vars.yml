---
# Test-only vars for local compose environment
dirsrv_password: "{{ vault_dirsrv_password | default('password') }}"
# For 389ds prebuilt containers (no systemd exposed), skip service control
dirsrv_manage_service: false
# Container instances are named 'localhost' in the 389ds image
dirsrv_instance: "localhost"
# optional artifact run label for repeatable snapshots
dirsrv_artifact_run: compose-dev

# Backend name used by 389-DS default instance
dirsrv_backends:
  userroot:
    suffix: "dc=example,dc=com"

# Use vendor-recommended online export/import via dsconf
dirsrv_export_method: dsconf

# For container tests, use LDAPI socket derived from the actual instance
dirsrv_ldapi_socket_path: "/data/run/slapd-{{ dirsrv_instance }}.socket"
dirsrv_ldapi_uri: "ldapi://{{ dirsrv_ldapi_socket_path | regex_replace('/', '%2F') }}"

# Skip config archive/schema extraction in containers
dirsrv_collect_config: false
dirsrv_manage_source_backends: true

# Network configuration for lab containers
dsnet_s1_ip: "10.89.1.6"
dsnet_s2_ip: "10.89.1.8"
dsnet_c1_ip: "10.89.1.4"
dsnet_c2_ip: "10.89.1.5"

# Disable network validation for migration (not replication)
dirsrv_network_validate: false

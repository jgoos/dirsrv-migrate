---
# Replication test variables for Podman compose lab

# Explicitly set target type to container for development/testing
dirsrv_target_type: container
# Instances inside containers are named 'localhost' and listen on port 389
dirsrv_instance: "localhost"
dirsrv_password: "{{ vault_dirsrv_password | default('password') }}"
dirsrv_repl_nodes:
  ds-s1:
    role: supplier
    instance: "localhost"
    host: "s1.dsnet.test"
    port: 3389
    protocol: LDAP
  ds-c1:
    role: consumer
    instance: "localhost"
    host: "c1.dsnet.test"
    port: 3389
    protocol: LDAP

dirsrv_repl_suffixes:
  - "dc=example,dc=com"

dirsrv_repl_replica_ids:
  "dc=example,dc=com":
    ds-s1: 1

dirsrv_repl_auth:
  method: SIMPLE
  bind_dn: "cn=Directory Manager"
  bind_password: "{{ dirsrv_password }}"

dirsrv_repl_agreements:
  "dc=example,dc=com":
    - from: "ds-s1"
      to: "ds-c1"
      name: "s1-to-c1"
      init: true

dirsrv_repl_set_release_timeout: false
dirsrv_repl_run_replcheck: false

# Tighter wait thresholds for fast lab runs
dirsrv_repl_wait_stale_seconds: 300
dirsrv_repl_wait_steady_ok_polls: 2
dirsrv_repl_wait_delay: 2
dirsrv_repl_wait_timeout: 120
